{
  "permissions": {
    "allow": [
      "Bash(python scripts/import_data.py:*)",
      "Bash(python scripts/calculate_similar_jobs.py:*)",
      "Bash(python scripts/query_similar_jobs.py:*)",
      "Bash(python:*)",
      "Bash(pip install:*)",
      "Bash(dir:*)",
      "Bash(ls:*)",
      "Bash(.venvScriptspython.exe -c \"\nimport pymongo\n\nclient = pymongo.MongoClient\\(''mongodb://localhost:27017''\\)\ndb = client[''job_recommendation'']\n\n# Count all jobs\ntotal_jobs = db.jobs.count_documents\\({}\\)\nprint\\(f''Total jobs in database: {total_jobs}''\\)\n\n# Check job statuses\npipeline = [\n    {''$group'': {''_id'': ''$status'', ''count'': {''$sum'': 1}}}\n]\nstatuses = list\\(db.jobs.aggregate\\(pipeline\\)\\)\nprint\\(f''Jobs by status:''\\)\nfor s in statuses:\n    print\\(f''  - {s[\"\"_id\"\"]}: {s[\"\"count\"\"]}''\\)\n\nclient.close\\(\\)\n\")",
      "Bash(\".venv\\\\Scripts\\\\python.exe\" -c \"import pymongo; client = pymongo.MongoClient\\(''mongodb://localhost:27017''\\); db = client[''job_recommendation'']; print\\(''Total jobs:'', db.jobs.count_documents\\({}\\)\\); print\\(''CVs:'', db.cvs.count_documents\\({}\\)\\)\")",
      "Bash(.venvScriptspython.exe:*)",
      "Bash(\".venv\\\\Scripts\\\\python.exe\" -c \"import pymongo; client = pymongo.MongoClient\\(''mongodb://localhost:27017''\\); db = client[''job_recommendation'']; total = db.jobs.count_documents\\({}\\); with_emb = db.jobs.count_documents\\({''embedding'': {''$exists'': True, ''$ne'': None}}\\); print\\(f''Total jobs: {total}''\\); print\\(f''Jobs with embeddings: {with_emb}''\\)\")",
      "Bash(powershell -Command \"cd ''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''; .\\\\.venv\\\\Scripts\\\\python.exe -c \"\"import pymongo; client = pymongo.MongoClient\\(''mongodb://localhost:27017''\\); db = client[''job_recommendation'']; total = db.jobs.count_documents\\({}\\); with_emb = db.jobs.count_documents\\({''embedding'': {''$exists'': True, ''$ne'': None}}\\); print\\(f''Total jobs: {total}''\\); print\\(f''Jobs with embeddings: {with_emb}''\\); total_cvs = db.cvs.count_documents\\({}\\); cvs_emb = db.cvs.count_documents\\({''embedding'': {''$exists'': True, ''$ne'': None}}\\); print\\(f''Total CVs: {total_cvs}''\\); print\\(f''CVs with embeddings: {cvs_emb}''\\)\"\"\")",
      "Bash(cmd /c \"cd /d \"\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\"\" && .venv\\\\Scripts\\\\python.exe -c \"\"import pymongo; client = pymongo.MongoClient\\(''mongodb://localhost:27017''\\); db = client[''job_recommendation'']; print\\(''Total jobs:'', db.jobs.count_documents\\({}\\)\\); print\\(''Jobs with embeddings:'', db.jobs.count_documents\\({''embedding'': {''$exists'': True}}\\)\\); print\\(''Total CVs:'', db.cvs.count_documents\\({}\\)\\); print\\(''CVs with embeddings:'', db.cvs.count_documents\\({''embedding'': {''$exists'': True}}\\)\\)\"\"\")",
      "Bash(cmd /c \"cd /d c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service && .venv\\\\Scripts\\\\python.exe scripts/query_similar_jobs.py --help\")",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(del \"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\scripts\\\\check_mongo_counts.py\")",
      "Bash(more:*)",
      "Bash(powershell:*)",
      "Bash(cmd /c \"cd /d c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service && .venv\\\\Scripts\\\\python.exe scripts/visualize_with_labels.py\")",
      "Bash(Select-String -NotMatch \"UserWarning\")",
      "Bash(Select-String -Pattern \"INFO|seed|similar|CVs\")",
      "Bash(cmd /c \"cd /d \"\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\"\" && .venv\\\\Scripts\\\\python.exe -c \"\"import sys; sys.path.insert\\(0, ''.''\\); from scripts.database import DatabaseConnection; db = DatabaseConnection\\(\\); cursor = db.get_cursor\\(\\).__enter__\\(\\); cursor.execute\\(''SELECT column_name FROM information_schema.columns WHERE table_name = ''''jobs'''' ORDER BY ordinal_position''\\); cols = cursor.fetchall\\(\\); print\\(''Jobs table columns:''\\); [print\\(f''  - {c[0]}''\\) for c in cols]\"\"\")",
      "Bash(cmd /c \"cd /d \"\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\"\" && .venv\\\\Scripts\\\\python.exe scripts/check_industry.py\")",
      "Bash(cmd /c \"cd /d c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service && .venv\\\\Scripts\\\\python.exe scripts\\\\check_industry.py\")",
      "Bash(c:/Users/DaoDuyThong/StudioProjects/\"Recommend Service\"/.venv/Scripts/python.exe:*)",
      "Bash(\"/mnt/c/Users/DaoDuyThong/StudioProjects/Recommend Service/.venv/Scripts/python.exe\" \"/mnt/c/Users/DaoDuyThong/StudioProjects/Recommend Service/scripts/check_industry.py\")",
      "Bash(powershell.exe -Command \"& ''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe'' ''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\scripts\\\\check_industry.py''\")",
      "Bash(cmd /c \"cd /d c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service && .venv\\\\Scripts\\\\python.exe scripts/run_evaluation.py --compare\")",
      "Bash(cmd /c:*)",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\":*)",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\" -c:*)",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\" -c \"\nimport sys\nsys.path.insert\\(0, r''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''\\)\nfrom recommend_service.database import DatabaseConnection\n\ndb = DatabaseConnection\\(\\)\nprint\\(''Testing connection...''\\)\nresult = db.test_connection\\(\\)\nprint\\(f''Connection: {result}''\\)\n\nif result:\n    query = ''''''\n        SELECT DISTINCT j.id, j.title, COUNT\\(sj.\"\"similarJobId\"\"\\) as similar_count\n        FROM jobs j\n        JOIN similar_jobs sj ON j.id = sj.\"\"jobId\"\"\n        WHERE j.status = ''ACTIVE''\n        GROUP BY j.id, j.title\n        ORDER BY similar_count DESC\n        LIMIT 20\n    ''''''\n    with db.get_cursor\\(\\) as cursor:\n        cursor.execute\\(query\\)\n        jobs = cursor.fetchall\\(\\)\n    \n    print\\(f''\\\\nFound {len\\(jobs\\)} jobs with similar jobs:''\\)\n    for idx, job in enumerate\\(jobs[:10], 1\\):\n        print\\(f''{idx}. {job[\"\"title\"\"][:50]} - {job[\"\"similar_count\"\"]} similar jobs''\\)\n\")",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\" -c \"\nimport sys\nimport io\nsys.stdout = io.TextIOWrapper\\(sys.stdout.buffer, encoding=''utf-8'', errors=''replace''\\)\nsys.path.insert\\(0, r''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''\\)\nfrom recommend_service.database import DatabaseConnection\n\ndb = DatabaseConnection\\(\\)\nwith db.get_cursor\\(\\) as cursor:\n    # Check columns in jobs table\n    cursor.execute\\(\"\"\"\"\"\"\n        SELECT column_name, data_type \n        FROM information_schema.columns \n        WHERE table_name = ''jobs'' \n        ORDER BY ordinal_position\n    \"\"\"\"\"\"\\)\n    cols = cursor.fetchall\\(\\)\n    print\\(''Columns in jobs table:''\\)\n    for c in cols:\n        print\\(f''  - {c[\"\"column_name\"\"]}: {c[\"\"data_type\"\"]}''\\)\n\")",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\" -c \"\nimport sys\nsys.path.insert\\(0, r''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''\\)\n\nfrom recommend_service.services.evaluation.baseline_methods import Word2VecRecommender\nfrom recommend_service.database import DatabaseConnection\n\n# Load model\nmodel_path = r''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\models\\\\word2vec\\\\baomoi_400d.model.bin''\nprint\\(''Loading Word2Vec model...''\\)\nrecommender = Word2VecRecommender\\(model_path=model_path\\)\nprint\\(''Model loaded!''\\)\n\n# Get a sample CV from database\ndb = DatabaseConnection\\(\\)\nwith db.get_cursor\\(\\) as cursor:\n    cursor.execute\\(''''''\n        SELECT id, title, skills, experience \n        FROM cvs \n        WHERE title IS NOT NULL AND skills IS NOT NULL\n        LIMIT 1\n    ''''''\\)\n    cv = cursor.fetchone\\(\\)\n    \nprint\\(f''\\\\n=== Test CV ===''\\)\nprint\\(f''ID: {cv[\"\"id\"\"]}''\\)\nprint\\(f''Title: {cv[\"\"title\"\"]}''\\)\nprint\\(f''Skills: {cv[\"\"skills\"\"][:200] if cv[\"\"skills\"\"] else \"\"N/A\"\"}...''\\)\n\n# Get some jobs\nwith db.get_cursor\\(\\) as cursor:\n    cursor.execute\\(''''''\n        SELECT id, title, description, requirements\n        FROM jobs \n        WHERE status = ''ACTIVE'' AND title IS NOT NULL\n        LIMIT 50\n    ''''''\\)\n    jobs = cursor.fetchall\\(\\)\n\nprint\\(f''\\\\nLoaded {len\\(jobs\\)} jobs for testing''\\)\n\n# Get recommendations\nprint\\(''\\\\n=== Word2Vec Recommendations ===''\\)\nrecommendations = recommender.recommend\\(cv, jobs, top_k=10\\)\n\nfor i, \\(job, score\\) in enumerate\\(recommendations, 1\\):\n    print\\(f''{i}. [{score:.4f}] {job[\"\"title\"\"][:60]}''\\)\n\")",
      "Bash(chcp:*)",
      "Bash(powershell.exe -Command \"Set-Location ''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''; & ''.\\\\.venv\\\\Scripts\\\\python.exe'' ''scripts/test_word2vec_recommend.py'' 2>&1\")",
      "Bash(\"c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service\\\\.venv\\\\Scripts\\\\python.exe\" -c \"\nimport sys\nsys.path.insert\\(0, r''c:\\\\Users\\\\DaoDuyThong\\\\StudioProjects\\\\Recommend Service''\\)\nfrom recommend_service.database import DatabaseConnection\nimport numpy as np\nimport json\n\ndb = DatabaseConnection\\(\\)\n\n# Check job distribution\nwith db.get_cursor\\(\\) as cursor:\n    # Total active jobs\n    cursor.execute\\(''SELECT COUNT\\(*\\) as total FROM jobs''\\)\n    total = cursor.fetchone\\(\\)[''total'']\n    print\\(f''Total jobs: {total}''\\)\n    \n    # Jobs by title \\(top 20\\)\n    cursor.execute\\(''''''\n        SELECT title, COUNT\\(*\\) as count\n        FROM jobs\n        WHERE title IS NOT NULL\n        GROUP BY title\n        ORDER BY count DESC\n        LIMIT 20\n    ''''''\\)\n    titles = cursor.fetchall\\(\\)\n    print\\(f''\\\\nTop 20 job titles \\(duplicates\\):''\\)\n    total_duplicates = 0\n    for t in titles:\n        print\\(f''  {t[\"\"title\"\"][:60]}: {t[\"\"count\"\"]} jobs''\\)\n        total_duplicates += t[''count'']\n    print\\(f''\\\\nTotal jobs in top 20 titles: {total_duplicates}''\\)\n    \n    # Check similarity distribution between random job pairs\n    cursor.execute\\(''''''\n        SELECT id, \"\"titleEmbedding\"\"\n        FROM jobs\n        WHERE \"\"titleEmbedding\"\" IS NOT NULL\n        ORDER BY RANDOM\\(\\)\n        LIMIT 100\n    ''''''\\)\n    jobs = cursor.fetchall\\(\\)\n    \nprint\\(f''\\\\nLoaded {len\\(jobs\\)} random jobs with embeddings''\\)\n\n# Calculate similarity between random pairs\nembeddings = []\nfor job in jobs[:50]:\n    emb = job[''titleEmbedding'']\n    if isinstance\\(emb, str\\):\n        emb = json.loads\\(emb\\)\n    if emb:\n        embeddings.append\\(np.array\\(emb\\)\\)\n\nif len\\(embeddings\\) >= 2:\n    similarities = []\n    for i in range\\(min\\(50, len\\(embeddings\\)\\)\\):\n        for j in range\\(i+1, min\\(i+10, len\\(embeddings\\)\\)\\):\n            if j < len\\(embeddings\\):\n                sim = np.dot\\(embeddings[i], embeddings[j]\\) / \\(np.linalg.norm\\(embeddings[i]\\) * np.linalg.norm\\(embeddings[j]\\)\\)\n                similarities.append\\(sim\\)\n    \n    print\\(f''\\\\nSimilarity statistics between {len\\(similarities\\)} random job pairs:''\\)\n    print\\(f''  Mean: {np.mean\\(similarities\\):.4f}''\\)\n    print\\(f''  Median: {np.median\\(similarities\\):.4f}''\\)\n    print\\(f''  Min: {np.min\\(similarities\\):.4f}''\\)\n    print\\(f''  Max: {np.max\\(similarities\\):.4f}''\\)\n    print\\(f''  Std: {np.std\\(similarities\\):.4f}''\\)\n    print\\(f''\\\\n  % > 0.60: {100 * np.sum\\(np.array\\(similarities\\) > 0.60\\) / len\\(similarities\\):.2f}%''\\)\n    print\\(f''  % > 0.65: {100 * np.sum\\(np.array\\(similarities\\) > 0.65\\) / len\\(similarities\\):.2f}%''\\)\n    print\\(f''  % > 0.70: {100 * np.sum\\(np.array\\(similarities\\) > 0.70\\) / len\\(similarities\\):.2f}%''\\)\n    print\\(f''  % > 0.75: {100 * np.sum\\(np.array\\(similarities\\) > 0.75\\) / len\\(similarities\\):.2f}%''\\)\n\")",
      "Bash(python scripts/run_evaluation.py:*)",
      "Bash(python scripts/evaluate_from_csv.py:*)"
    ]
  }
}
